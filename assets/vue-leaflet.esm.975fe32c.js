import{r as A,v as U,x as p,y as R,z as b,A as P,C as q,n as I,D as M,E as v,G as z,H as J}from"./index.04e99704.js";const Z=(e,n)=>{let o;return function(...t){const r=this;o&&clearTimeout(o),o=setTimeout(()=>{e.apply(r,t),o=null},n)}},F=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),S=(e,n,o)=>{for(const t in o){const r="set"+F(t);e[r]?z(()=>o[t],(l,f)=>{e[r](l,f)}):n[r]&&z(()=>o[t],l=>{n[r](l)})}},j=e=>{const n={};for(const o in e)if(o.startsWith("on")&&!o.startsWith("onUpdate")&&o!=="onReady"){const t=o.slice(2).toLocaleLowerCase();n[t]=e[o]}return n},K=async e=>{const n=await Promise.all([b(()=>import("./marker-icon-2x.e233d1a6.js"),[]),b(()=>import("./marker-icon.34d9a2d9.js"),[]),b(()=>import("./marker-shadow.ddd1f13b.js"),[])]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:n[0].default,iconUrl:n[1].default,shadowUrl:n[2].default})},T=e=>{const n=A(()=>console.warn(`Method ${e} has been invoked without being replaced`)),o=(...t)=>n.value(...t);return o.wrapped=n,p(e,o),o},C=(e,n)=>e.wrapped.value=n,B=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0,E="useGlobalLeaflet",w={options:{type:Object,default:()=>({})}},D=e=>({options:e.options,methods:{}}),N={...w,pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},k=(e,n,o)=>{const t=v("addLayer"),r=v("removeLayer"),{options:l,methods:f}=D(e),d={...l,attribution:e.attribution,pane:e.pane},s=()=>t({leafletObject:n.value}),m=()=>r({leafletObject:n.value}),c={...f,setAttribution(u,O){this.$parent.leafletObject.attributionControl.removeAttribution(O).addAttribution(u)},setName(){m(),e.visible&&s()},setLayerType(){m(),e.visible&&s()},setVisible(u){n.value&&(u?s():m())},bindPopup({leafletObject:u}){n.value.bindPopup(u)},bindTooltip({leafletObject:u}){n.value.bindTooltip(u)},unbindTooltip(){const u=n.value?n.value.getTooltip():null;u&&u.unbindTooltip()},unbindPopup(){const u=n.value?n.value.getPopup():null;u&&u.unbindPopup()},updateVisibleProp(u){o.emit("update:visible",u)}};return p("bindPopup",c.bindPopup),p("bindTooltip",c.bindTooltip),p("unbindTooltip",c.unbindTooltip),p("unbindPopup",c.unbindPopup),J(()=>{c.unbindPopup(),c.unbindTooltip(),m()}),{options:d,methods:c}},Q=(e,n)=>{if(e&&n.default)return M("div",{style:{display:"none"}},n.default())},X={...N,pane:{type:String,default:"tilePane"},opacity:{type:Number,custom:!1,default:1},zIndex:{type:Number,default:1},tileSize:{type:Number,default:256},noWrap:{type:Boolean,default:!1},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:void 0}},Y=(e,n,o)=>{const{options:t,methods:r}=k(e,n,o);return{options:{...t,pane:e.pane,opacity:e.opacity,zIndex:e.zIndex,tileSize:e.tileSize,noWrap:e.noWrap,minZoom:e.minZoom,maxZoom:e.maxZoom},methods:{...r}}};var ee={emits:["ready","update:zoom","update:center","update:bounds"],props:{...w,center:{type:[Object,Array],default:()=>[0,0]},bounds:{type:[Array,Object],default:void 0},maxBounds:{type:[Array,Object],default:void 0},zoom:{type:Number,default:0},minZoom:{type:Number,default:void 0},maxZoom:{type:Number,default:void 0},paddingBottomRight:{type:Array,default:void 0},paddingTopLeft:{type:Array,default:void 0},padding:{type:Array,default:void 0},worldCopyJump:{type:Boolean,default:!1},crs:{type:[String,Object],default:"EPSG3857"},maxBoundsViscosity:{type:Number,default:void 0},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number,default:void 0},inertiaMaxSpeed:{type:Number,default:void 0},easeLinearity:{type:Number,default:void 0},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number,default:void 0},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:!1},useGlobalLeaflet:{type:Boolean,default:!1}},setup(e,n){const o=A(null),t=U({ready:!1,leafletRef:{},layersToAdd:[],layersInControl:[]}),{options:r}=D(e),l={...r,minZoom:e.minZoom,maxZoom:e.maxZoom,maxBounds:e.maxBounds,maxBoundsViscosity:e.maxBoundsViscosity,worldCopyJump:e.worldCopyJump,crs:e.crs,center:e.center,zoom:e.zoom,inertia:e.inertia,inertiaDeceleration:e.inertiaDeceleration,inertiaMaxSpeed:e.inertiaMaxSpeed,easeLinearity:e.easeLinearity,zoomAnimation:e.zoomAnimation,zoomAnimationThreshold:e.zoomAnimationThreshold,fadeAnimation:e.fadeAnimation,markerZoomAnimation:e.markerZoomAnimation},f=T("addLayer"),d=T("removeLayer"),s=T("registerControl"),m=T("registerLayerControl");p(E,e.useGlobalLeaflet);const c={moveEndHandler(){n.emit("update:zoom",t.leafletRef.getZoom()),n.emit("update:center",t.leafletRef.getCenter()),n.emit("update:bounds",t.leafletRef.getBounds())},overlayAddHandler(g){const y=t.layersInControl.find(L=>L.name===g.name);y&&y.updateVisibleProp(!0)},overlayRemoveHandler(g){const y=t.layersInControl.find(L=>L.name===g.name);y&&y.updateVisibleProp(!1)}};R(async()=>{e.useGlobalLeaflet&&(B.L=B.L||await b(()=>import("./index.04e99704.js").then(a=>a.l),["assets/index.04e99704.js","assets/index.40c84c2a.css"]));const{map:g,CRS:y,Icon:L,latLngBounds:x,latLng:G,DomEvent:H}=e.useGlobalLeaflet?B.L:await b(()=>import("./leaflet-src.esm.1c3fadee.js"),[]);try{l.beforeMapMount&&await l.beforeMapMount()}catch(a){console.error(`The following error occurred running the provided beforeMapMount hook ${a.message}`)}await K(L);const V=typeof l.crs=="string"?y[l.crs]:l.crs;l.crs=V||y.EPSG3857;const h={addLayer(a){a.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd.push(a):t.layersInControl.find(_=>_.leafletObject._leaflet_id===a.leafletObject._leaflet_id)||(t.layerControl.addLayer(a),t.layersInControl.push(a))),a.visible!==!1&&t.leafletRef.addLayer(a.leafletObject)},removeLayer(a){a.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd=t.layersToAdd.filter(i=>i.name!==a.name):(t.layerControl.removeLayer(a.leafletObject),t.layersInControl=t.layersInControl.filter(i=>i.leafletObject._leaflet_id!==a.leafletObject._leaflet_id))),t.leafletRef.removeLayer(a.leafletObject)},registerLayerControl(a){t.layerControl=a,t.layersToAdd.forEach(i=>{t.layerControl.addLayer(i)}),t.layersToAdd=[],s(a)},registerControl(a){t.leafletRef.addControl(a.leafletObject)},setZoom(a){const i=t.leafletRef.getZoom();a!==i&&t.leafletRef.setZoom(a,{animate:e.noBlockingAnimations?!1:null})},setPaddingBottomRight(a){t.paddingBottomRight=a},setPaddingTopLeft(a){t.paddingTopLeft=a},setPadding(a){t.padding=a},setCrs(a){const i=t.leafletRef.getBounds();t.leafletRef.options.crs=a,t.leafletRef.fitBounds(i,{animate:!1,padding:[0,0]})},fitBounds(a){t.leafletRef.fitBounds(a,{animate:this.noBlockingAnimations?!1:null})},setBounds(a){if(!a)return;const i=x(a);if(!i.isValid())return;!(t.lastSetBounds||t.leafletRef.getBounds()).equals(i,0)&&(t.lastSetBounds=i,t.leafletRef.fitBounds(i,this.fitBoundsOptions))},setCenter(a){if(a==null)return;const i=G(a),_=t.lastSetCenter||t.leafletRef.getCenter();(_.lat!==i.lat||_.lng!==i.lng)&&(t.lastSetCenter=i,t.leafletRef.panTo(i,{animate:this.noBlockingAnimations?!1:null}))}};C(f,h.addLayer),C(d,h.removeLayer),C(s,h.registerControl),C(m,h.registerLayerControl),t.leafletRef=g(o.value,l),S(h,t.leafletRef,e);const W=j(n.attrs);t.leafletRef.on("moveend",Z(c.moveEndHandler,100)),t.leafletRef.on("overlayadd",c.overlayAddHandler),t.leafletRef.on("overlayremove",c.overlayRemoveHandler),H.on(t.leafletRef,W),t.ready=!0,P(()=>n.emit("ready",t.leafletRef))}),q(()=>{t.leafletRef&&t.leafletRef.remove()});const u=I(()=>t.leafletRef),O=I(()=>t.ready);return{root:o,ready:O,leafletObject:u}},render(){return M("div",{style:{width:"100%",height:"100%"},ref:"root"},this.ready?this.$slots.default():{})}};ee.__file="src/components/LMap.vue";const te={...N,pane:{type:String,default:"markerPane"},draggable:{type:Boolean,custom:!0,default:!1},latLng:{type:[Object,Array],custom:!0,default:null},icon:{type:[Object],default:()=>{},custom:!1},zIndexOffset:{type:Number,custom:!1,default:null}},ne=(e,n,o)=>{const{options:t,methods:r}=k(e,n,o),l={...t,...e},f={...r,setDraggable(d){n.value.dragging&&(d?n.value.dragging.enable():n.value.dragging.disable())},latLngSync(d){o.emit("update:latLng",d.latlng),o.emit("update:lat-lng",d.latlng)},setLatLng(d){if(d!=null&&n.value){const s=n.value.getLatLng();(!s||!s.equals(d))&&n.value.setLatLng(d)}}};return{options:l,methods:f}};var oe={name:"LMarker",props:te,setup(e,n){const o=A({}),t=A(!1),r=v(E),l=v("addLayer");p("canSetParentHtml",()=>!!o.value.getElement()),p("setParentHtml",s=>o.value.getElement().innerHTML=s),p("setIcon",s=>o.value.setIcon&&o.value.setIcon(s));const{options:f,methods:d}=ne(e,o,n);return f.icon===void 0&&delete f.icon,R(async()=>{const{marker:s,DomEvent:m}=r?B.L:await b(()=>import("./leaflet-src.esm.1c3fadee.js"),[]);o.value=s(e.latLng,f);const c=j(n.attrs);m.on(o.value,c),o.value.on("move",Z(d.latLngSync,100)),S(d,o.value,e),l({...e,...d,leafletObject:o.value}),t.value=!0,P(()=>n.emit("ready",o.value))}),{ready:t,leafletObject:o}},render(){return Q(this.ready,this.$slots)}};oe.__file="src/components/LMarker.vue";const $={...X,tms:{type:Boolean,default:!1},subdomains:{type:String,default:"abc"},detectRetina:{type:Boolean,default:!1},url:{type:String,default:null}},ae=(e,n)=>{const{options:o,methods:t}=Y(e,n);return{options:{...o,tms:e.tms,subdomains:e.subdomains,detectRetina:e.detectRetina},methods:{...t}}};var le={props:$,setup(e,n){const o=A({}),t=v(E),r=v("addLayer"),{options:l,methods:f}=ae(e,o);return R(async()=>{const{tileLayer:d,DomEvent:s}=t?B.L:await b(()=>import("./leaflet-src.esm.1c3fadee.js"),[]);o.value=d(e.url,l);const m=j(n.attrs);s.on(o.value,m),S(f,o.value,e),r({...e,...f,leafletObject:o.value}),P(()=>n.emit("ready",o.value))}),{leafletObject:o}},render(){return null}};le.__file="src/components/LTileLayer.vue";({...$});export{oe as a,ee as b,le as s};
